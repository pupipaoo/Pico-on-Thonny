# Display Image & text on I2C driven ssd1306 OLED display 
from machine import Pin, I2C
from ssd1306 import SSD1306_I2C
import framebuf
from time import sleep


sda=machine.Pin(12)
scl=machine.Pin(13)
width=128
height=64
#i2c = machine.I2C(0, scl=scl, sda=sda, freq=400000)
#oled = SSD1306_I2C(width, height, i2c)                  # Init oled display
i2c = I2C(0, sda=Pin(12), scl=Pin(13), freq=40000)
oled = SSD1306_I2C(128, 64, i2c)
# Raspberry Pi logo as CAR

buffer = bytearray(b"\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x20\x00\x10\x00\x00\
\x00\x40\x78\x08\x00\x00\
\x00\x21\xd6\x14\x00\x00\
\x00\x8d\x6f\x45\x00\x00\
\x00\x43\xb4\x86\xc0\x00\
\x00\x25\x6c\x9b\x40\x00\
\x00\x1b\xb8\x6d\x20\x00\
\x00\x1d\x60\x6a\x20\x00\
\x00\x03\xa3\x31\x60\x00\
\x00\x02\x00\xa0\xa0\x00\
\x00\x02\x78\x1e\xe0\x00\
\x00\x00\x2c\x95\x80\x00\
\x00\x02\x30\x0e\x80\x00\
\x00\x02\x00\x80\x00\x00\
\x00\x00\x00\x80\x00\x00\
\x00\x01\x31\x00\x00\x00\
\x00\x1c\xbe\x00\x00\x00\
\x00\x14\x00\x00\x00\x00\
\x00\x18\x00\x00\x00\x00\
\x00\x2c\x00\x00\x00\x00\
\x00\x30\x00\x00\x00\x00\
\x00\x2c\x00\x00\x00\x00\
\x00\x59\x9b\x24\xd4\x00\
\x00\x35\x48\x54\x08\x00\
\x00\x69\x2a\xc5\x90\x00\
\x00\x29\x29\x08\x40\x00\
\x00\x00\x25\x2d\x50\x00\
\x00\x72\x35\x61\x10\x00\
\x00\x00\x80\x00\x00\x00\
\x00\x00\x00\x00\x08\x00\
\x01\x00\x00\x05\x40\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00\
\x00\x00\x00\x00\x00\x00")  #42,48

fb = framebuf.FrameBuffer(buffer, 44, 44, framebuf.MONO_HLSB)
oled.fill(0)

# Blit the image from the framebuffer to the oled display
oled.blit(fb, 10, 10)

# Add some text
#oled.text("Raspberry Pi",5,5)
#oled.text("Pico",5,15)

# Finally update the oled display so the image & text is displayed
oled.show()
sleep(1)
oled.fill(0)
oled.show()
sleep(2)

x=0
y=0
while True:
    #x=(x+1)% width
    x+=1
    if x>=128 :
        x=0
    y=10#(y+3)% height
    print(x)
    oled.fill(0)
    oled.blit(fb, x, y)
    oled.blit(fb, x-width, y)
#    oled.blit(fb, x, y-height)
#    oled.blit(fb, x-width, y-height)
    oled.show()
    sleep(0.001)